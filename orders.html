<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√ºt√ºn Sifari≈ül…ôr</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f8f8; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
        h2 { text-align: center; }
        .order-item { border-bottom: 1px solid #ddd; padding: 10px; }
        .notification { display: none; background: red; color: white; padding: 10px; text-align: center; font-weight: bold; border-radius: 5px; }
    </style>
</head>
<body>

    <div class="notification" id="notification">üî¥ Yeni sifari≈ü var!</div>

    <div class="container">
        <h2>B√ºt√ºn Sifari≈ül…ôr</h2>
        <div id="orders-list"></div>
    </div>

        <audio id="notification-sound" src="bildiris_sesi.mp3"></audio>


    </audio>
     
    <div>
        <button onclick="clearOrders()" style="background: red; color: white; padding: 10px; border: none; cursor: pointer;">
            B√ºt√ºn Sifari≈ül…ôri T…ômizl…ô
        </button>
    </div>

    <script>
      function loadOrders() {
    let orders = JSON.parse(localStorage.getItem("orders")) || [];
    let ordersList = document.getElementById("orders-list");
    ordersList.innerHTML = "";

    if (orders.length === 0) {
        ordersList.innerHTML = "<p>H…ôl…ô he√ß bir sifari≈ü yoxdur.</p>";
        return;
    }

    orders.forEach((order, index) => {
        let orderElement = document.createElement("div");
        orderElement.classList.add("order-item");
        orderElement.innerHTML = `
            <h3>Sifari≈ü #${index + 1}</h3>
            <p><strong>Ad Soyad:</strong> ${order.user.name}</p>
            <p><strong>√únvan:</strong> ${order.user.address}</p>
            <p><strong>Masa:</strong> ${order.table}</p>
            <p><strong>Telefon:</strong> ${order.user.phone}</p>
            <p><strong>Sifari≈ül…ôr:</strong></p>
            <ul>
                ${order.cart.map(item => `<li>${item.name} - ${item.price} AZN</li>`).join("")}
            </ul>
            <p><strong>√úmumi M…ôbl…ôƒü:</strong> ${order.total} AZN</p>
            <hr>
        `;
        ordersList.appendChild(orderElement);
    });
}

function clearOrders() {
    if (confirm("B√ºt√ºn sifari≈ül…ôri silm…ôk ist…ôdiyiniz…ô …ôminsiniz?")) {
        localStorage.removeItem("orders");
        localStorage.setItem("lastOrderCount", 0);
        document.getElementById("orders-list").innerHTML = "<p>H…ôl…ô he√ß bir sifari≈ü yoxdur.</p>";
        alert("B√ºt√ºn sifari≈ül…ôr silindi!");
    }
}

function checkNewOrders() {
    let lastOrderCount = parseInt(localStorage.getItem("lastOrderCount")) || 0;
    let orders = JSON.parse(localStorage.getItem("orders")) || [];

    if (orders.length > lastOrderCount) {
        let newOrdersCount = orders.length - lastOrderCount;

        // **H…ôr yeni sifari≈ü √º√ß√ºn bildiri≈ü s…ôsi √ßal**
        for (let i = 0; i < newOrdersCount; i++) {
            setTimeout(() => {
                let audio = new Audio("bildiri≈ü s…ôsi.mp3"); // Bildiri≈ü s…ôsi
                audio.play();
            }, i * 1000); // H…ôr s…ôs 1 saniy…ô aralƒ±qla √ßalƒ±nacaq
        }

        document.getElementById("notification").style.display = "block"; // Qƒ±rmƒ±zƒ± bildiri≈ü g√∂st…ôr
        alert(`${newOrdersCount} yeni sifari≈ü daxil olub!`);
        localStorage.setItem("lastOrderCount", orders.length);
    }
}

// **H…ôr 5 saniy…ôd…ôn bir yeni sifari≈ül…ôri yoxlayƒ±r**
setInterval(checkNewOrders, 5000);

window.onload = function() {
    loadOrders();
    checkNewOrders();
};

        
    </script>
<script src="script.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

</body>
</html>
